/**
 * ============================================================
 * üì∑ camera.h ‚Äî –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è –∫–∞–º–µ—Ä—ã ESP32-CAM (OV2640)
 * ============================================================
 *
 * –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ —á–µ—Ä–µ–∑ FreeRTOS –º—å—é—Ç–µ–∫—Å.
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä–∏–º-—Å–µ—Ä–≤–µ—Ä–æ–º (Core 0) –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º /photo (Core 1).
 *
 * –§–æ—Ä–º–∞—Ç: JPEG, VGA 640x480, –¥–≤–æ–π–Ω–æ–π —Ñ—Ä–µ–π–º–±—É—Ñ–µ—Ä.
 *
 * ============================================================
 */

#ifndef CAMERA_H
#define CAMERA_H

#include <Arduino.h>
#include <esp_camera.h>

// –ú—å—é—Ç–µ–∫—Å –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏
extern SemaphoreHandle_t cameraSemaphore;

/**
 * @brief –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–º–µ—Ä—ã OV2640 (–ø–∏–Ω—ã, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –º—å—é—Ç–µ–∫—Å)
 * –í—ã–∑—ã–≤–∞—Ç—å –≤ setup() –¥–æ –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤.
 * @return true ‚Äî –∫–∞–º–µ—Ä–∞ –≥–æ—Ç–æ–≤–∞, false ‚Äî –æ—à–∏–±–∫–∞
 */
bool cameraInit();

/**
 * @brief –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞—Ö–≤–∞—Ç –æ–¥–Ω–æ–≥–æ JPEG-–∫–∞–¥—Ä–∞
 *
 * –í–ê–ñ–ù–û: –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–¥—Ä–∞ –≤—ã–∑—ã–≤–∞—é—â–∏–π –∫–æ–¥ –û–ë–Ø–ó–ê–ù –≤–µ—Ä–Ω—É—Ç—å –±—É—Ñ–µ—Ä:
 *   esp_camera_fb_return(fb);
 *
 * @param timeoutMs –ú–∞–∫—Å. –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –º—å—é—Ç–µ–∫—Å–∞ (–º—Å), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 500
 * @return –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ camera_fb_t* (JPEG) –∏–ª–∏ NULL
 */
camera_fb_t* cameraCapture(uint32_t timeoutMs = 500);

#endif // CAMERA_H
