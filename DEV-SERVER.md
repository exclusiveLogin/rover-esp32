# üöÄ Dev Server ‚Äî –õ–æ–∫–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–õ–æ–∫–∞–ª—å–Ω—ã–π HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ **–±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ ESP32**.

**–§–∏—á–∏:**
- üìÅ –†–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ –∏–∑ `/data`
- üîÑ **MJPEG Proxy** ‚Äî –æ–±—Ö–æ–¥ CORS –¥–ª—è –ª—é–±—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (IP Webcam –∏ —Ç.–¥.)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
node dev-server.js
# –∏–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–∞
node dev-server.js 3000
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏ dev-server** (–ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 8080)

2. **–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   ```
   http://localhost:8080
   ```

3. **–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ ESP32:**
   - –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
   - –í—ã–ø–æ–ª–Ω–∏:
     ```javascript
     AppConfig.ESP32_HOST = '192.168.1.100';  // IP —Ç–≤–æ–µ–≥–æ ESP32
     location.reload();
     ```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—à–∏–≤–∫–∏  
‚úÖ **–û—Ç–ª–∞–¥–∫–∞** ‚Äî DevTools, breakpoints, console.log  
‚úÖ **Hot reload** ‚Äî –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É  
‚úÖ **CORS** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤  

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
Rover/
‚îú‚îÄ‚îÄ data/              ‚Üê –°—Ç–∞—Ç–∏–∫–∞ (HTML, CSS, JS)
‚îÇ   ‚îú‚îÄ‚îÄ cv-processor.js  ‚Üê OpenCV.js –º–æ–¥—É–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îî‚îÄ‚îÄ config.js        ‚Üê –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ OPENCV-GUIDE.md  ‚Üê –¢—É—Ç–æ—Ä–∏–∞–ª –ø–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–º—É –∑—Ä–µ–Ω–∏—é
‚îú‚îÄ‚îÄ dev-server.py      ‚Üê Python —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ dev-server.js      ‚Üê Node.js —Å–µ—Ä–≤–µ—Ä
‚îî‚îÄ‚îÄ DEV-SERVER.md      ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `data/config.js`:

```javascript
window.AppConfig = {
  ESP32_HOST: location.hostname,  // –ú–µ–Ω—è–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  STREAM_PORT: 81,
  CONTROL_API: '/api/control',
  // ...
};
```

## –ü—Ä–∏–º–µ—Ä—ã

### –ò–∑–º–µ–Ω–∏—Ç—å IP ESP32 –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
AppConfig.ESP32_HOST = '192.168.1.50';
location.reload();
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç —Å—Ç—Ä–∏–º–∞:
```javascript
AppConfig.STREAM_PORT = 82;
location.reload();
```

### –ò–∑–º–µ–Ω–∏—Ç—å expo –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
```javascript
AppConfig.CONTROL.expo = 0.5;  // +50%
```

## üîÑ MJPEG Proxy (–æ–±—Ö–æ–¥ CORS)

–î–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –±–µ–∑ CORS (IP Webcam –Ω–∞ Android, –≤–Ω–µ—à–Ω–∏–µ –∫–∞–º–µ—Ä—ã) –∏—Å–ø–æ–ª—å–∑—É–π proxy.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ config.js

```javascript
// –í–∫–ª—é—á–∏—Ç—å proxy
AppConfig.USE_PROXY = true;

// –£–∫–∞–∑–∞—Ç—å URL –≤–Ω–µ—à–Ω–µ–≥–æ —Å—Ç—Ä–∏–º–∞
AppConfig.EXTERNAL_STREAM_URL = 'http://192.168.1.50:8080/video';

// –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
location.reload();
```

### –ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å (–≤—Ä–µ–º–µ–Ω–Ω–æ)

```javascript
AppConfig.USE_PROXY = true;
AppConfig.EXTERNAL_STREAM_URL = 'http://192.168.1.50:8080/video';
location.reload();
```

### –ü—Ä–∏–º–µ—Ä—ã URL –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | URL |
|------------|-----|
| IP Webcam (Android) | `http://IP:8080/video` |
| DroidCam | `http://IP:4747/video` |
| ESP32-CAM | `http://IP:81/stream` |

### –ü—Ä—è–º–æ–π proxy URL

–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –Ω–∞–ø—Ä—è–º—É—é –æ—Ç–∫—Ä—ã—Ç—å:
```
http://localhost:8080/proxy/stream?url=http://192.168.1.50:8080/video
```

---

## üëÅÔ∏è Computer Vision (OpenCV.js)

CV –æ–±—Ä–∞–±–æ—Ç–∫–∞ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞** –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenCV.js

OpenCV.js (~11MB) –Ω–µ –≤–∫–ª—é—á—ë–Ω –≤ git. –°–∫–∞—á–∞–π –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:

```powershell
# Windows (PowerShell)
Invoke-WebRequest -Uri "https://docs.opencv.org/4.x/opencv.js" -OutFile "data/opencv.js"
```

```bash
# Linux/macOS
curl -L "https://docs.opencv.org/4.x/opencv.js" -o data/opencv.js
```

### –í–∫–ª—é—á–µ–Ω–∏–µ CV

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
AppConfig.CV.enabled = true;
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```javascript
// –ò–∑–º–µ–Ω–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ—Ç–µ–∫—Ü–∏–∏
AppConfig.CV.cannyLow = 30;
AppConfig.CV.cannyHigh = 100;

// –û—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏
AppConfig.CV.showGrid = false;
AppConfig.CV.showWalls = false;
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª: [docs/OPENCV-GUIDE.md](docs/OPENCV-GUIDE.md)
